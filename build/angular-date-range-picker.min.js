/*! angular-date-range-picker 2013-10-18 */
(function(){angular.module("dateRangePicker",[]),angular.module("dateRangePicker").directive("dateRangePicker",["$compile",function(a){var b,c;return c='<div ng-show="visible" class="angular-date-range-picker__picker">\n  <div class="angular-date-range-picker__timesheet">\n    <button ng-click="move(-1, $event)" class="angular-date-range-picker__prev-month">&#9664;</button>\n    <div ng-repeat="month in months" class="angular-date-range-picker__month">\n      <div class="angular-date-range-picker__month-name">{{ month.name }}</div>\n      <table class="angular-date-range-picker__calendar">\n        <tr>\n          <th ng-repeat="day in month.weeks[1]" class="angular-date-range-picker__calendar-weekday">\n            {{ day.date.format("dd") }}\n          </th>\n        </tr>\n        <tr ng-repeat="week in month.weeks">\n          <td class="angular-date-range-picker__calendar-day" ng-class=\'{"angular-date-range-picker__calendar-day-selected": day.selected, "angular-date-range-picker__calendar-day-disabled": day.disabled}\' ng-repeat="day in week" ng-click="select(day, $event)">\n            {{ day.date.date() }}\n          </td>\n        </tr>\n      </table>\n    </div>\n    <button ng-click="move(+1, $event)" class="angular-date-range-picker__next-month">&#9654;</button>\n  </div>\n  <div class="angular-date-range-picker__panel">\n    Select range: <select ng-click="prevent_select($event)" ng-model="quick" ng-options="e.range as e.label for e in quickList"></select>\n    <button ng-click="ok($event)" class="angular-date-range-picker__apply">Apply</button>\n    <a href="#" ng-click="hide($event)" class="angular-date-range-picker__cancel">cancel</a>\n  </div>\n</div>',b=moment().range("2013-01-01","2013-01-02"),{restrict:"AE",replace:!0,template:'<span class="angular-date-range-picker__input">\n  <span ng-show="model">{{ model.start.format("ll") }} - {{ model.end.format("ll") }}</span>\n  <span ng-hide="model">Select date range</span>\n</span>',scope:{model:"=ngModel"},link:function(d,e){var f,g,h;return d.quickList=[{label:"This week",range:moment().range(moment().startOf("week"),moment().endOf("week"))},{label:"Next week",range:moment().range(moment().startOf("week").add(1,"week"),moment().endOf("week").add(1,"week"))},{label:"This month",range:moment().range(moment().startOf("month"),moment().endOf("month"))},{label:"Next month",range:moment().range(moment().startOf("month").add(1,"month"),moment().endOf("month").add(1,"month"))}],d.quick=null,d.range=null,d.selecting=!1,d.visible=!1,d.start=null,g=function(){var a,b;return d.range=d.selection?(b=d.selection.start.clone().startOf("month").startOf("day"),a=b.clone().add(2,"months").endOf("month").startOf("day"),moment().range(b,a)):moment().range(moment().startOf("month").subtract(1,"month").startOf("day"),moment().endOf("month").add(1,"month").startOf("day"))},h=function(){var a,c,e,f,g,h;for(d.months=[],c=12*d.range.start.year()+d.range.start.month(),d.range.by(b,function(a){var b,e,f,g,h,i,j;return f=12*a.year()+a.month()-c,h=parseInt((7+a.date()-a.day())/7),b=a.day(),g=!1,e=!1,d.start?(g=a===d.start,e=a<d.start):g=d.selection&&d.selection.contains(a),(i=d.months)[f]||(i[f]={name:a.format("MMMM YYYY"),weeks:[]}),(j=d.months[f].weeks)[h]||(j[h]=[]),d.months[f].weeks[h][b]={date:a,selected:g,disabled:e}}),g=d.months,h=[],e=0,f=g.length;f>e;e++)a=g[e],a.weeks[0]?h.push(void 0):h.push(a.weeks.splice(0,1));return h},d.show=function(){return d.selection=d.model,g(),h(),d.visible=!0},d.hide=function(a){return null!=a&&"function"==typeof a.stopPropagation&&a.stopPropagation(),d.visible=!1},d.prevent_select=function(a){return null!=a?"function"==typeof a.stopPropagation?a.stopPropagation():void 0:void 0},d.ok=function(a){return null!=a&&"function"==typeof a.stopPropagation&&a.stopPropagation(),d.model=d.selection,d.hide()},d.select=function(a,b){return null!=b&&"function"==typeof b.stopPropagation&&b.stopPropagation(),a.disabled?void 0:(d.selecting=!d.selecting,d.selecting?(d.start=a.date,h()):(d.selection=moment().range(d.start,a.date),d.start=null,h()))},d.move=function(a,b){return null!=b&&"function"==typeof b.stopPropagation&&b.stopPropagation(),d.range=moment().range(d.range.start.add(a,"months").startOf("month").startOf("day"),d.range.start.clone().add(2,"months").endOf("month").startOf("day")),h()},d.$watch("quick",function(a){return a?(d.selection=d.quick,g(),h()):void 0}),f=a(angular.element(c))(d),e.append(f),e.bind("click",function(a){return null!=a&&"function"==typeof a.stopPropagation&&a.stopPropagation(),d.$apply(function(){return d.visible?d.hide():d.show()})}),angular.element(document).bind("click",function(){return d.$apply(function(){return d.hide()})}),g(),h()}}}])}).call(this);